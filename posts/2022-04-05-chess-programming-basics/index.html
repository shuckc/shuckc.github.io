<!doctype html><html lang=en-uk><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Chess Programming Basics | Tea Engineering Blog</title><link rel=canonical href=https://shucksmith.uk/posts/2022-04-05-chess-programming-basics/><meta name=description content="Hugo is a general-purpose website framework. Technically speaking, Hugo is a static site generator. Unlike systems that dynamically build a page with each visitor request, Hugo builds pages when you create or update your content. Since websites are viewed far more often than they are edited, Hugo is designed to provide an optimal viewing experience for your websiteâ€™s end users and an ideal writing experience for website."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Chess Programming Basics"><meta property="og:description" content="Curiosity One fun aspect of parenting is revisiting things you learnt as a child, as the teacher. Since putting a chess board somewhat prominantly at home the eldest has expressed some interest and learnt a few moves. We bought a chess book aimed for a young audiance to see the game taught gently, and I found myself learning more than expected.
Once down the rabbit hole of chess, I started to read about the early chess computers, and particularly those with bespoke hardware/software."><meta property="og:type" content="article"><meta property="og:url" content="https://shucksmith.uk/posts/2022-04-05-chess-programming-basics/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-04T17:00:00+00:00"><meta property="article:modified_time" content="2022-04-04T17:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Chess Programming Basics"><meta name=twitter:description content="Curiosity One fun aspect of parenting is revisiting things you learnt as a child, as the teacher. Since putting a chess board somewhat prominantly at home the eldest has expressed some interest and learnt a few moves. We bought a chess book aimed for a young audiance to see the game taught gently, and I found myself learning more than expected.
Once down the rabbit hole of chess, I started to read about the early chess computers, and particularly those with bespoke hardware/software."><link rel=stylesheet href=https://shucksmith.uk/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=stylesheet href=/css/default.css><script src=/js/fen_diagram.js defer></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/consultancy>Consultancy</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://shucksmith.uk/posts/2021-06-14-fpga-versa-ecp5-board-demo/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=https://shucksmith.uk/posts/2022-11-06-fusesoc-yosys-options/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&text=Chess%20Programming%20Basics" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&title=Chess%20Programming%20Basics" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&is_video=false&description=Chess%20Programming%20Basics" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Chess%20Programming%20Basics&body=Check out this article: https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&title=Chess%20Programming%20Basics" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&title=Chess%20Programming%20Basics" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&name=Chess%20Programming%20Basics&description=Curiosity%20One%20fun%20aspect%20of%20parenting%20is%20revisiting%20things%20you%20learnt%20as%20a%20child%2c%20as%20the%20teacher.%20Since%20putting%20a%20chess%20board%20somewhat%20prominantly%20at%20home%20the%20eldest%20has%20expressed%20some%20interest%20and%20learnt%20a%20few%20moves.%20We%20bought%20a%20chess%20book%20aimed%20for%20a%20young%20audiance%20to%20see%20the%20game%20taught%20gently%2c%20and%20I%20found%20myself%20learning%20more%20than%20expected.%0aOnce%20down%20the%20rabbit%20hole%20of%20chess%2c%20I%20started%20to%20read%20about%20the%20early%20chess%20computers%2c%20and%20particularly%20those%20with%20bespoke%20hardware%2fsoftware." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&t=Chess%20Programming%20Basics" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Chess Programming Basics</h1><div class=meta><div class=postdate><time datetime="2022-04-04 17:00:00 +0000 UTC" itemprop=datePublished>2022-04-04</time></div><div class=article-category><i class="fas fa-archive"></i>
<a class=category-link href=/categories/tech>tech</a></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/chess rel=tag>chess</a></div></div></header><div id=toc><nav id=TableOfContents><ul><li><a href=#curiosity>Curiosity</a></li><li><a href=#history>History</a></li><li><a href=#basic-representation>Basic Representation</a></li><li><a href=#universal-chess-interface-uci-protocol>Universal Chess Interface (UCI) Protocol</a></li></ul></nav></div><div class=content itemprop=articleBody><h2 id=curiosity>Curiosity</h2><p>One fun aspect of parenting is revisiting things you learnt as a child, as the teacher. Since putting a chess board somewhat prominantly at home the eldest has expressed some interest and learnt a few moves. We bought a <a href=https://www.amazon.co.uk/Usborne-Chess-Book-Activity-Books/dp/1409598446/>chess book aimed for a young audiance</a> to see the game taught gently, and I found myself learning more than expected.</p><p><img src=/images/usborne-chess-book.jpg alt="Chess Book"></p><p>Once down the rabbit hole of chess, I started to read about the early chess computers, and particularly those with bespoke hardware/software. I read with great interest of subsequent developments through to present with the rise of <a href=https://stockfishchess.org>stockfish</a>, the <a href=https://www.chessprogramming.org/Stockfish_NNUE>introduction of NNUE</a> to the engine, and the subsequent training improvements using the schemes borrowed from alpha-go.</p><p>I wanted to type up some of my notes, and I hope to use them as the basis for this post and some subsequent deeper exploration of the concepts. In particular I am interesting in trying to get a basic chess engine working on an FPGA, ie. using digital logic. This seems to be a relatively unexplored, at least in the public domain.</p><h2 id=history>History</h2><p>The first recognisable chess programming paper is <a href=https://www.chessprogramming.org/Claude_Shannon>Claude Shannon&rsquo;s</a> paper <a href=https://www.pi.infn.it/%7Ecarosi/chess/shannon.txt>Programming a Computer for Playing Chess</a> which make some interesting contributions:</p><ul><li>precisely defines a &ldquo;postion&rdquo; <code>P</code>, ie. the board plus addional state to continue the game in accordance with the rules.</li><li>states the intractability of either fully exploring a search tree (time), or pre-computing the best move for all positions (storage).</li><li>gives an approximate position static evaluation function <code>f(P)</code>.</li><li>states the shortcomings of static evaluation in the middle of piece exchanges, and the need to evaluate up to a quiescent (quiet) positions.</li><li>introduces the switch between minimising/maximising the evaluation function during each ply to consider the best reply for each move during the search.</li><li>proposes a binary coding (bit sizes) for position <code>P</code>, and a move <code>m</code> as tuple <code>(from, to, promotion)</code>.</li><li>algorithm to apply a move to <code>P</code> to determine the next game state <code>'P</code>.</li><li>that the moves for a queen are the sum of a rook and bishop, (what we now recognise as diagonal and manhatten).</li><li>that some moves (&lsquo;psuado legal&rsquo;) from a move generator may turn out to leave the player in check and therefore be illegal.</li><li>definition of stability <code>g(P)</code> and a metric <code>h(P,m)</code> to prioritise the exploration of &ldquo;forceful&rdquo; moves (capturing, threatening, check).</li><li>the use of opening books.</li><li>changing evaluation weights at open/mid/end game.</li></ul><h2 id=basic-representation>Basic Representation</h2><p>The canonical represetation of a chess board is a <a href=https://en.wikipedia.org/wiki/Forsyth%E2%80%93Edwards_Notation>Forsight-Edwards or &lsquo;fen&rsquo; string</a> that provides the necessary information to restart a game from a particular position. It&rsquo;s a 7-bit safe ASCII string such as <code>rnb1kb2/pppp4/6p1/4pp2/8/4PP2/PPPP2P1/RNB1KB2 w Qq - 0 9</code> shown below. There are 6 sections, separated by a space character.</p><ol><li>Piece placement. Describes the 8 ranks each separated by a <code>/</code>, consisting of algebraic notation pieces for white <code>PNBRQK</code> and black <code>pnbrqk</code>, plus the numbers <code>12345678</code> to indicated repeated gaps. So the initial position is <code>rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR</code>.</li><li>Who to play, starting with <code>w</code> for white and <code>b</code> for black.</li><li>Castling rights, either a dash <code>-</code> for none, or one or more characters from <code>KQkq</code> to indicate for kings/queens side castling for white and black respectively.</li><li>En passant target square, a dash <code>-</code> or the algebraic notation <code>e3</code> of the square just passed over</li><li>Halfmove clock, as an ASCII decimal integer</li><li>Fullmove clock, as an ASCII decimal interger. Starts from 1 and increases after each black move.</li></ol><figure class=fen-diag><div class=fen-diag-cnv-wrapper data-fen="rnb1kb2/pppp4/6p1/4pp2/8/4PP2/PPPP2P1/RNB1KB2 w Qq - 0 9"></div><figcaption>FEN: rnb1kb2/pppp4/6p1/4pp2/8/4PP2/PPPP2P1/RNB1KB2 w Qq - 0 9</figcaption></figure><h2 id=universal-chess-interface-uci-protocol>Universal Chess Interface (UCI) Protocol</h2><p>UCI is a <a href=http://wbec-ridderkerk.nl/html/UCIProtocol.html>simple protocol</a> between chess engines and game UI&rsquo;s. It is again ASCII text only and puts the game UI in control of the chess engine. Either party can send a message to the other, messages as ASCII commands separated by a line break. A simple exchanage might be:</p><pre><code>&gt; uci
&lt; id name MyEngine
&lt; uciok
&gt; isready
&lt; readyok
&gt; ucinewgame
&gt; position &lt;fen string | startpos&gt; &lt;moves&gt;
&gt; go infinite
&gt; go searchmoves &lt;e2e4&gt;
&gt; go movetime &lt;msec&gt;
&gt; go depth &lt;2&gt;
&gt; stop
&lt; bestmove &lt;move&gt;
</code></pre></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/consultancy>Consultancy</a></li></ul></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&text=Chess%20Programming%20Basics" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&title=Chess%20Programming%20Basics" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&is_video=false&description=Chess%20Programming%20Basics" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Chess%20Programming%20Basics&body=Check out this article: https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&title=Chess%20Programming%20Basics" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&title=Chess%20Programming%20Basics" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&name=Chess%20Programming%20Basics&description=Curiosity%20One%20fun%20aspect%20of%20parenting%20is%20revisiting%20things%20you%20learnt%20as%20a%20child%2c%20as%20the%20teacher.%20Since%20putting%20a%20chess%20board%20somewhat%20prominantly%20at%20home%20the%20eldest%20has%20expressed%20some%20interest%20and%20learnt%20a%20few%20moves.%20We%20bought%20a%20chess%20book%20aimed%20for%20a%20young%20audiance%20to%20see%20the%20game%20taught%20gently%2c%20and%20I%20found%20myself%20learning%20more%20than%20expected.%0aOnce%20down%20the%20rabbit%20hole%20of%20chess%2c%20I%20started%20to%20read%20about%20the%20early%20chess%20computers%2c%20and%20particularly%20those%20with%20bespoke%20hardware%2fsoftware." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fshucksmith.uk%2fposts%2f2022-04-05-chess-programming-basics%2f&t=Chess%20Programming%20Basics" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 Tea Engineering Ltd.</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/consultancy>Consultancy</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script></html>